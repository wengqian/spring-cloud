package com.wq.activemq.entity;import org.apache.activemq.ActiveMQConnectionFactory;import javax.jms.*;import java.util.HashMap;import java.util.Map;public class Activemq {    /**     * url     * */    private String  URL = "tcp://127.0.0.1:61616";    /**     * 消息发送者     * */    private Map<String, MessageProducer> messageProducerMap = new HashMap<>();    /**     * 消息消费者     * */    private Map<String, MessageConsumer> messageConsumerMap = new HashMap<>();    private Session session;    public String getUrl() {        return URL;    }    public void setUrl(String url) {        if (url !=null && !url.isEmpty()) {            this.URL = url;        }    }    public MessageProducer getMessageProducer(String key) {        return messageProducerMap.get(key);    }    public void setMessageProducer(String key,MessageProducer messageProducer) {        messageProducerMap.put(key,messageProducer);    }    public MessageConsumer getMessageConsumer(String key) {        return messageConsumerMap.get(key);    }    public void setMessageConsumer(String key,MessageConsumer messageConsumer) {        messageConsumerMap.put(key,messageConsumer);    }    public Session getSession() {        return session;    }    public void setSession(Session session) {        this.session = session;    }    public Activemq(){        try {            createSession(null);        }catch (Exception e){        }    }    public Activemq(String url){        try {            createSession(URL);        }catch (Exception e){            e.printStackTrace();        }    }    /**     *  //1使用传递过来的url     *  //2使用获取数据库中的url     *  //3使用获取配置中的url     *  //4使用默认的url     * */    public void createSession(String url) throws JMSException {        setUrl(url);        //1、创建 ActiveMQ 连接，设置 brokerURL        ConnectionFactory connectionFactory =                new ActiveMQConnectionFactory(url);        //2、创建 JMS 连接        Connection connection = connectionFactory.createConnection();        //3、启动连接（这里需要手动启动）        connection.start();        //4、创建会话 Session（参数一 transacted：是否是事务  参数二：自动确认）        session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);    }}