package com.wq.microservicenettywebsocket.server;import com.wq.microcore.util.UUIDUtil;import com.wq.microservicenettywebsocket.entity.WebSocket;import org.springframework.beans.factory.annotation.Value;import org.springframework.stereotype.Component;import java.io.IOException;/** * */@Componentpublic class WebSocketServer {    /**     * 获取websocket服务的ip     */    @Value("${netty-websocket.host}")    private String netty_websocket_host;    /**     * 获取websocket服务的端口     */    @Value("${netty-websocket.port}")    private String netty_websocket_port;    /**     * 新增加socket链接     *     * @param webSocket     */    public WebSocket addWebSocket(WebSocket webSocket) {        //获取url路径        String url = "ws://" + netty_websocket_port + ":" + netty_websocket_port + "/websocket?";        webSocket.setUrl(url);        //当不存在sid的时候则由系统产生        if (webSocket.getSid() == null || webSocket.getSid().isEmpty()) {            webSocket.setSid(UUIDUtil.getUUID());        }        return webSocket;    }    /**     * sid推送推送消息     *     * @param webSocket     */    public String push(WebSocket webSocket) {        try {            WebSocketClientServer.sendInfo(webSocket.getMessage(), webSocket.getSid());        } catch (IOException e) {            e.printStackTrace();            return webSocket.getSid() + "#" + e.getMessage();        }        return "success";    }}